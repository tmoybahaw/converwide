<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live DASH Player</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.9.0/shaka-player.compiled.js"></script>
  <style>
    body {
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    video {
      width: 720px;
      height: 576px;
      background: black;
    }
  </style>
</head>
<body>
  <video id="video" controls autoplay></video>
  <script>
    async function initPlayer() {
      // Install built-in polyfills
      shaka.polyfill.installAll();

      if (!shaka.Player.isBrowserSupported()) {
        alert('Browser not supported!');
        return;
      }

      const video = document.getElementById('video');
      const player = new shaka.Player(video);

      // Optional: enable live catch-up for short live window
      player.configure({
        streaming: {
          liveCatchUp: true,
          rebufferingGoal: 12, // seconds of buffer
          bufferingGoal: 24
        }
      });

      // Listen for errors
      player.addEventListener('error', e => {
        console.error('Shaka Player Error:', e.detail);
      });

      const mpdUrl = 'http://143.44.136.110:6910/001/2/ch00000090990000001305/manifest.mpd?virtualDomain=001.live_hls.zte.com&IASHttpSessionId=OTT2909020250816165854007211';

      try {
        await player.load(mpdUrl);
        console.log('Live DASH feed loaded!');
      } catch (error) {
        console.error('Error loading live feed:', error);
      }
    }

    initPlayer();
  </script>
</body>
</html>
